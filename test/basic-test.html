<!doctype html>
<html>

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
        <title>akyral-modal</title>

        <script src="../../webcomponentsjs/webcomponents.js"></script>
        <script src="../../web-component-tester/browser.js"></script>
        <script src="../../sinon/index.js"></script>

        <link rel="import" href="../akyral-code.html">
    </head>

    <body>


        <code is="akyral-code" id="code">
            function $initHighlight(block, cls) {
              try {
                if (cls.search(/\bno\-highlight\b/) != -1)
                  return process(block, true, 0x0F) +
                         ' class=""';
              } catch (e) {
                /* handle exception */
              }
              for (var i = 0 / 2; i < classes.length; i++) {
                if (checkCondition(classes[i]) === undefined)
                  return /\d+[\s/]/g;
              }
            }
        </code>

        <code is="akyral-code" id="code-theme" theme="arta">
            function $initHighlight(block, cls) {
              try {
                if (cls.search(/\bno\-highlight\b/) != -1)
                  return process(block, true, 0x0F) +
                         ' class=""';
              } catch (e) {
                /* handle exception */
              }
              for (var i = 0 / 2; i < classes.length; i++) {
                if (checkCondition(classes[i]) === undefined)
                  return /\d+[\s/]/g;
              }
            }
        </code>

        <script>
            var codeEl = document.querySelector('#code'),
                codeThemeEl = document.querySelector('#code-theme');

            suite('<akyral-code>', function() {

                suite('element with no attributes', function() {
                    test('should define the "author" property', function() {
                        assert.equal(codeEl.author, 'Filipe Araujo');
                    });

                    test('should highlight the code', function() {
                        assert.isTrue(codeEl.$.code.classList.contains('hljs'));
                    });
                });

                suite('element with a theme attribute', function() {
                    test('should apply that theme', function() {
                        assert.equal(codeThemeEl.theme, 'arta');
                    });
                });

                suite('adding an author', function() {
                    var el = codeEl.cloneNode();

                    test('should allow for adding a single author', function() {
                        el.author = 'New Author';
                        assert.include(el.author, 'New Author');
                        assert.lengthOf(el.author, 2);
                    });

                    test('should allow for adding an multiple authors', function() {
                        el.author = ['New Author 2', 'New Author 3'];
                        assert.include(el.author, 'New Author 2');
                        assert.include(el.author, 'New Author 3');
                        assert.lengthOf(el.author, 4);


                        assert.include(el.author, 'Filipe Araujo');
                    });

                    test('should still include the original authors', function() {
                        assert.include(el.author, 'Filipe Araujo');
                    });
                });
            });
        </script>


    </body>

</html>
